<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" i18n:domain="opencore"
  metal:use-macro="here/@@standard_macros/master">
  <head>
    <title metal:fill-slot="title" tal:content="string:${view/context/Title} - ${view/area/Title}" />
  </head>
  <body>
    <div metal:fill-slot="content">
      <div metal:use-macro="here/@@listen_macros/bcrumb"/>
      <div metal:use-macro="here/@@listen_macros/tabs"/>
      <div id="oc-content-main">
        <div class="oc-headingBlock">
          <h2 tal:content="view/Title" />
        </div>

        <form name="manage-form" id="manage-form"
              tal:attributes="action request/ACTUAL_URL"
              tal:define="errors view/errors|nothing"
              method="post">
          <table class="oc-dataTable" cellspacing="0">
            <thead>
            <tr>
              <th scope="col" i18n:translate="manage_membership_remove">Remove</th>
              <th scope="col" i18n:translate="manage_membership_user">Address / User ID</th>
              <th scope="col" i18n:translate="manage_membership_subscribed">Subscribed</th>
              <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <tr tal:repeat="user view/allowed_senders_data">
              <td>
                <input type="checkbox" tal:attributes="name python:'remove_'+user" />
              </td>
              <td> <!-- tal:content="string:${user}" />-->
                <a tal:omit-tag="python:not view.is_member(user)"
                   tal:attributes="href string:${here/portal_url}/people/${user}/profile">
                  <span tal:replace="user">test@example.com</span>
                </a>
              </td>
              <td tal:define="subscribed python:view.is_subscribed(user) and 1 or 0">
                <input type="checkbox" tal:attributes="name python:'subscribed_'+user; checked subscribed" />
                <input type="hidden" tal:condition="subscribed" tal:attributes="name python:'wassubscribed_'+user" />
              </td>
              <td>
                <span tal:replace="python: view.pending_status(user) " />
              </td>
            </tr>
            </tbody>
            <tfoot style="background-color: #eee; padding: 0.25em 0; line-height: normal;">
            <tr>
              <td></td>
              <td>
                <label i18n:translate="manage_membership_add" for="add_email">Add:</label>
                <input type="text" id="add_email" name="add_email" value="" size="25" />
              </td>
              <td class="oc-form-fieldBlock">
                <input type="checkbox" id="add_subscribed" name="add_subscribed" />
                <label i18n:translate="manage_membership_subscribe" for="add_subscribed">Subscribe?</label>
              </td>
              <td />
            </tr>
            </tfoot>
          </table>
          <div class="oc-actions">
            <input type="submit" name="save" value="Save changes" />
          </div>
          <!-- ???
          <p tal:content="python: errors" />
          -->
        </form>
      </div>
    </div>
  </body>
</html>
