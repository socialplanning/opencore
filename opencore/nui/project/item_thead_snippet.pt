<tal:macro metal:define-macro="item_thead_snippet">
  <tal:setvar define="item_type item_type | options/item_type;
                      item_date_author_header item_date_author_header | options/item_date_author_header;
                      sort_on options/sort_on | string:title;
                      sort_order options/sort_order | string:ascending;
                      item_collection item_collection | options/item_collection;
                      ">
  <tal:if condition="item_collection/editable">
    <thead tal:attributes="id string:oc-${item_type}-thead" >
      <tr>
        <th class="oc-dataTable-checkBoxColumn">
          <input type="checkbox" class="oc-checkAll" />
        </th>
        <th scope="col"
            tal:define="myname string:Title;
                        myvalue string:title">
          <metal:do use-macro="view/item_thead_snippet/macros/sortable_header" />
        </th>
        <th scope="col"
            tal:condition="python:item_type!='pages'"
            tal:define="myname string:Size;
                        myvalue string:obj_size">
          <metal:do use-macro="view/item_thead_snippet/macros/sortable_header" />
        </th>
        <th scope="col" 
            tal:define="myname item_date_author_header;
                        myvalue string:obj_date">
          <metal:do use-macro="view/item_thead_snippet/macros/sortable_header" />
        </th>
        <th>Actions</th>
      </tr>
    </thead>
  </tal:if>

  <tal:if condition="not:item_collection/editable">
    <thead tal:attributes="id string:oc-${item_type}-thead" >
      <tr>
        <th scope="col"
            tal:define="myname string:Title;
                        myvalue string:title">
          <metal:do use-macro="view/item_thead_snippet/macros/sortable_header" />
        </th>
        <th scope="col"
            tal:condition="python:item_type!='pages' and item_type!='lists'"
            tal:define="myname string:Size;
                        myvalue string:obj_size">
          <metal:do use-macro="view/item_thead_snippet/macros/sortable_header" />
        </th>
        <th scope="col"
            tal:condition="python:item_type=='lists'"
            tal:define="myname string:Conversations;
                        myvalue string:obj_size">
          <metal:do use-macro="view/item_thead_snippet/macros/sortable_header" />
        </th>
        <th scope="col" 
            tal:define="myname item_date_author_header;
                        myvalue string:obj_date">
          <metal:do use-macro="view/item_thead_snippet/macros/sortable_header" />
        </th>
      </tr>
    </thead>
  </tal:if>

  </tal:setvar>
</tal:macro>

<tal:hack condition="nothing">
 <metal:macro define-macro="sortable_header">
   <a tal:condition="python: sort_on == myvalue"
      tal:attributes="href string:contents?task|resort=Resort&item_type=${item_type}&sort_by=${myvalue}&sort_order=${sort_order};
                      class string:oc-columnSortable oc-selected oc-js-actionLink">
     <tal:dummy replace="myname" />
     <tal:nada condition="python: sort_order == 'ascending'">
       &darr;
     </tal:nada>
     <tal:nada condition="python: sort_order != 'ascending'">
       &uarr;
     </tal:nada>
   </a>
   <a tal:condition="python: sort_on != myvalue"
      tal:attributes="href string:contents?task|resort=Resort&item_type=${item_type}&sort_by=${myvalue};
                      class string:oc-columnSortable oc-js-actionLink">
     <tal:dummy replace="myname" />
   </a>
 </metal:macro>
</tal:hack>
